var formKaryawanDOM={formAdd:"#form-add-karyawan",onlyNumber:".onlynumber",showFieldJabatan:"#kode_jabatan",fieldEmail:"#email",fieldNik:"#nik"},setupFormKaryawanUtils={checkNikAndEmail:function(n){return $.ajax({url:BASE_URL+"master/karyawan/Karyawan/check_nik_and_email",method:"post",data:{email:$(formKaryawanDOM.fieldEmail).val(),nik:$(formKaryawanDOM.fieldNik).val()},success:function(a){n(JSON.parse(a))}})},test:function(a){console.log("from utils test",a)}},setupFormKaryawanController=function(a){return{init:function(){$(formKaryawanDOM.formAdd).validate({rules:{email:{required:!0,email:!0},nik:{required:!0,minlength:10},nama_depan:{required:!0},jenis_kelamin:{required:!0},tanggal_lahir:{required:!0},no_telp:{required:!0},agama:{required:!0},no_rekening:{required:!0},nama_bank:{required:!0},atas_nama:{required:!0},jabatan:{required:!0}},messages:{email:{required:"Email Tidak Boleh Kosong",email:"Email Tidak Valid"},nik:{required:"Nik Tidak Boleh Kosong",minlength:"Minimal Nik 10 Karakter "},nama_depan:{required:"Nama Depan Tidak Boleh Kosong"},jenis_kelamin:{required:"Jenis Kelamin Tidak Boleh Kosong"},tanggal_lahir:{required:"Tanggal Lahir Tidak Boleh Kosong"},no_telp:{required:"No Telp Tidak Boleh Kosong"},agama:{required:"Agama Harus Diisi"},no_rekening:{required:"No Rekening Tidak Boleh Kosong"},nama_bank:{required:"Nama Bank Tidak Boleh Kosong"},atas_nama:{required:"Atas Nama Tidak Boleh kosong"},jabatan:{required:"Jabatan Harus Diisi"}},errorPlacement:function(a,n){a.css("color","red"),a.insertAfter(n)},submitHandler:function(n){a.checkNikAndEmail(function(a){200===a.code?$.ajax({url:BASE_URL+"master/karyawan/Karyawan/add",method:"post",data:new FormData(n),processData:!1,contentType:!1,cache:!1,async:!1,success:function(a){var n=JSON.parse(a);200===n.code?($.notify(n.msg,"success"),location.hash="#/listkaryawan"):$.notify(n.msg,"info")}}):$.notify(a.msg,"info")})}}),$(formKaryawanDOM.formAdd).on("keypress",formKaryawanDOM.onlyNumber,function(a){if(8!=a.which&&0!=a.which&&(a.which<48||57<a.which))return!1}),$.ajax({url:BASE_URL+"master/karyawan/Gaji/show_jabatan",method:"get",success:function(a){$(formKaryawanDOM.showFieldJabatan).html(a)}})}}}(setupFormKaryawanUtils);$(document).ready(function(){setupFormKaryawanController.init()});var ListKaryawanDOM={labelShowKaryawan:"#show-karyawan",formSearch:"#form_search_karyawan",fieldSearch:"#search_karyawan",modalKaryawan:"#modalKaryawan"},listKaryawanUI={showKaryawan:function(a){console.log(a.length);var n="";0<a.length?a.forEach(function(a){n+='<div class="col-md-4 stretch-card grid-margin">',n+='<div class="card bg-gradient-info card-img-holder text-white">',n+='<div class="card-body">',n+='<h4 class="font-weight-normal mb-3">'+a.nama_depan+" "+a.nama_belakang+" ",n+='<i class="mdi mdi-account-outline mdi-24px float-right"></i>',n+="</h4>",n+='<h2 class="mb-5">'+a.nik+"</h2>",n+="<p> "+a.email+" </p>",n+='<h6 class="card-text">',n+='<a href="#/detailkaryawan/'+a.nik+'" class="btn btn-info" > Detail </a>',n+="</h6>",n+="</div>",n+="</div>",n+="</div>"}):(n+='<div class="text-center" style="align-items: center, justify-content: center">',n+='<img src="'+BASE_URL+'assets/img/no_data.svg" width="200px" />',n+="<p> Data Karyawan Tidak Di temukan </p>",n+="</div>"),$(ListKaryawanDOM.labelShowKaryawan).html(n)}},listKaryawanController=function(n){var a=function(a){$.ajax({url:BASE_URL+"master/karyawan/Karyawan/fetch_all",method:"post",data:{query:a},dataType:"json",success:function(a){n.showKaryawan(a)}})};return{init:function(){console.log("initialize app"),a(),$(ListKaryawanDOM.formSearch).on("keyup",ListKaryawanDOM.fieldSearch,function(){""!==$(this).val()?a($(this).val()):a()})}}}(listKaryawanUI);$(document).ready(function(){listKaryawanController.init()});